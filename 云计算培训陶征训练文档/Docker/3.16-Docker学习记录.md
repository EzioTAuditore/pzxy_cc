# 3.16-Dockerå­¦ä¹ è®°å½•

### Dockerå®¹å™¨

``` shell
# å¯åŠ¨é•œåƒ
docker run é•œåƒ
# ä¸€èˆ¬é…åˆ-itè¿›è¡Œäº¤äº’å¼ä½¿ç”¨ï¼Œå¦‚æœé…åˆ-itçš„è¯éœ€è¦æŒ‡å®šä¸€ä¸ªç»ˆç«¯ç±»å‹ï¼š/bin/bash

# åå°å¯åŠ¨é•œåƒ
docker run -d centos /bin/sh -c "while true; do echo hello world; sleep 1"
# -d åå°è¿è¡Œï¼Œå¦‚æœå®¹å™¨å†…æ²¡æœ‰å®ˆæŠ¤è¿›ç¨‹ï¼Œå°±ä¼šè‡ªåŠ¨ç»“æŸï¼Œå†æ¬¡å†™äº†ä¸€ä¸ªæ­»å¾ªç¯æ¥ä¿æŒè¿è¡Œã€‚

# æŸ¥çœ‹å®¹å™¨
[root@master ~]# docker ps -a
CONTAINER ID   IMAGE          COMMAND       CREATED          STATUS                      PORTS     NAMES
b01062a65ba4   centos         "/bin/bash"   9 minutes ago    Exited (0) 8 minutes ago              sleepy_sanderson
884414810cbf   centos         "/bin/bash"   16 minutes ago   Exited (0) 10 minutes ago             heuristic_ardinghelli
39de7f0736aa   centos         "/bin/bash"   19 minutes ago   Exited (0) 19 minutes ago             epic_lederberg
# docker ps é»˜è®¤åªèƒ½æ˜¾ç¤ºåœ¨è¿è¡ŒçŠ¶æ€çš„å®¹å™¨ï¼ŒåŠ ä¸Š-aå°±å¯ä»¥æŸ¥çœ‹å…¨éƒ¨å®¹å™¨ã€‚
# CONTAINER ID	å®¹å™¨ID
# IMAGE			ä½¿ç”¨é•œåƒ
# COMMAND   	æ‰§è¡Œå‘½ä»¤
# CREATED		åˆ›å»ºåçš„æ—¶é—´
# STATUS		å®¹å™¨çŠ¶æ€
#	created		å·²åˆ›å»º
#	restarting	é‡å¯ä¸­/up
# 	removing	è¿ç§»ä¸­
# 	paused		æš‚åœ
# 	exited		åœæ­¢
# 	dead		æ­»äº¡
# PORTS			å¼€æ”¾ç«¯å£
# NAMES			å®¹å™¨åå­—

# åœ¨ä¸»æœºä¸­æŸ¥çœ‹å®¹å™¨çš„è¾“å‡º
[root@master ~]# docker logs 884414810cbf
[root@884414810cbf /]# ls
bin  dev  etc  home  lib  lib64  lost+found  media  mnt  opt  proc  root  run  sbin  srv  sys  tmp  usr  var
[root@884414810cbf /]# exit

# åœæ­¢å®¹å™¨
docke stop 884414810cbf
```

### Dockerå®¢æˆ·ç«¯

```shell
# æŸ¥çœ‹å®¹å™¨å†…å­˜å ç”¨
docker stats

# è·å–dockeré•œåƒ
docker pull é•œåƒåç§°
# é»˜è®¤ä»DockerHubè·å–ï¼Œé€Ÿåº¦è¾ƒæ…¢

# å¯åŠ¨å·²åœæ­¢å®¹å™¨
docker start 884414810cbf

# åœæ­¢å®¹å™¨
docker stop 884414810cbf

# è¿›å…¥å®¹å™¨
docker attach 884414810cbf
# attachè¿›å…¥å®¹å™¨æ­£åœ¨è¿è¡Œçš„ç»ˆç«¯ï¼Œé€€å‡ºåå°±ç»“æŸåŸç»ˆç«¯è¿è¡Œï¼Œä¼šå¯¼è‡´å®¹å™¨åœæ­¢
docker exec -it 884414810cbf /bin/bash
# execè¿›å…¥dockerå®¹å™¨ååˆ›å»ºä¸€ä¸ªæ–°çš„ç»ˆç«¯ï¼Œæ¨å‡ºåä¸å½±å“åŸæœ‰ç»ˆç«¯å†…å®¹ã€‚

# å¯¼å‡ºå®¹å™¨å¿«ç…§
[root@master ~]# docker export 884414810cbf > centos.tar
[root@master ~]# ls
anaconda-ks.cfg  centos.tar  test
# å°†884414810cbfçš„å®¹å™¨å¯¼å‡ºä¸ºcentos.tar

# å¯¼å…¥å®¹å™¨å¿«ç…§
[root@master ~]# docker import centos.tar import/centos:v1
sha256:5d2993ba4be268434ddc00136fd8f16461dfdbfc75cdc15328aa8f11fd49bfc4
[root@master ~]# docker images
REPOSITORY      TAG       IMAGE ID       CREATED          SIZE
import/centos   v1        5d2993ba4be2   3 seconds ago    209MB
centos          v1        332944bedca8   24 minutes ago   210MB
centos          latest    300e315adb2f   3 months ago     209MB
# å¯¼å…¥åä¸ºé•œåƒï¼Œéœ€è¦ä½¿ç”¨docker runå¯åŠ¨

# åˆ é™¤å®¹å™¨
[root@master ~]# docker ps -a
CONTAINER ID   IMAGE          COMMAND       CREATED          STATUS                      PORTS     NAMES
b01062a65ba4   centos         "/bin/bash"   28 minutes ago   Exited (0) 27 minutes ago             sleepy_sanderson
# çœ‹è¿™é‡ŒğŸ‘‡
884414810cbf   centos         "/bin/bash"   35 minutes ago   Exited (0) 29 minutes ago             heuristic_ardinghelli
39de7f0736aa   centos         "/bin/bash"   37 minutes ago   Exited (0) 37 minutes ago             epic_lederberg
938d2b7eb9fc   centos         "/bin/bash"   2 days ago       Exited (137) 2 days ago               centos
5e72b3d9ba3d   d1165f221234   "/hello"      2 days ago       Exited (0) 2 days ago                 wizardly_driscoll
[root@master ~]# docker rm -f 884	# åˆ é™¤å®¹å™¨ï¼Œå¯ä»¥ä½¿ç”¨IDå‰3ä½è¡¨ç¤ºID
884
[root@master ~]# docker ps -a
CONTAINER ID   IMAGE          COMMAND       CREATED          STATUS                      PORTS     NAMES
b01062a65ba4   centos         "/bin/bash"   29 minutes ago   Exited (0) 27 minutes ago             sleepy_sanderson
# çœ‹è¿™é‡ŒğŸ‘‡ï¼Œå·²ç»åˆ é™¤äº†
39de7f0736aa   centos         "/bin/bash"   38 minutes ago   Exited (0) 38 minutes ago             epic_lederberg
938d2b7eb9fc   centos         "/bin/bash"   2 days ago       Exited (137) 2 days ago               centos
5e72b3d9ba3d   d1165f221234   "/hello"      2 days ago       Exited (0) 2 days ago                 wizardly_driscoll

# dockerå¼€æ”¾çš„ç«¯å£
[root@docker_master ~]# docker run -d -P -h "webapp_01" training/webapp python app.py
c8099c6942ccc8cb7cdf8e7932add5315b825222be356475bf4e8e08f17c833f
# -dæ˜¯åœ¨åå°è¿è¡Œï¼Œä¸éœ€è¦å‰å°è¿›å…¥ï¼Œ-hæ˜¯ç»™è™šæ‹ŸæœºæŒ‡å®šä¸€ä¸ªä¸»æœºåï¼Œ-Péšæœºè¿›è¡Œç«¯å£æ˜ å°„
# å¯ä»¥æ·»åŠ --name ä¿®æ”¹å®¹å™¨åç§°
# [root@docker_master ~]# docker ps
CONTAINER ID   IMAGE             COMMAND           CREATED         STATUS         PORTS                     NAMES
c8099c6942cc   training/webapp   "python app.py"   4 seconds ago   Up 3 seconds   0.0.0.0:49153->5000/tcp   festive_albattani
# åœ¨PORTSå­—æ®µçœ‹åˆ°ç¬¬ä¸€ä¸ªæ˜¯ç‰©ç†ä¸»æœºçš„ç«¯å£æ˜ å°„åˆ°c8099c6942ccå®¹å™¨çš„5000ç«¯å£ï¼Œæ¥ä¸‹æ¥è¿›è¡Œè®¿é—®æµ‹è¯•
[root@docker_master ~]# curl localhost:49153
Hello world![root@docker_master ~]# 
# å¯ä»¥çœ‹åˆ°ç½‘é¡µè¾“å‡ºçš„å†…å®¹
# æˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨-på‚æ•°æ¥æŒ‡å®šç«¯å£ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬åœæ­¢å®¹å™¨ï¼Œä¿®æ”¹ç«¯å£åé‡æ–°å¯åŠ¨
CONTAINER ID   IMAGE             COMMAND           CREATED         STATUS         PORTS                    NAMES
# 																							ğŸ‘‡è¿™é‡Œ
0b07f0cf56fa   training/webapp   "python app.py"   5 seconds ago   Up 4 seconds   0.0.0.0:5000->5000/tcp   exciting_haslett
# å¯ä»¥çœ‹åˆ°æˆ‘ä»¬å¯ä»¥æŒ‡å®šç«¯å£ä¸º5000
# ä¹Ÿå¯ä»¥ä½¿ç”¨docker portæŸ¥çœ‹ç«¯å£å¼€æ”¾çŠ¶æ€
[root@docker_master ~]# docker port 0b0
5000/tcp -> 0.0.0.0:5000
# 0b0æ˜¯å®¹å™¨IDç¼©å†™

# æŸ¥çœ‹å®¹å™¨è¾“å‡ºæ—¥å¿—ä¿¡æ¯
[root@docker_master ~]# docker logs 0b0
 * Running on http://0.0.0.0:5000/ (Press CTRL+C to quit)
172.18.0.1 - - [16/Mar/2021 09:02:06] "GET / HTTP/1.1" 200 -

# åœæ­¢å®¹å™¨
[root@docker_master ~]# docker stop 0b0
0b0
[root@docker_master ~]# docker ps -a
CONTAINER ID   IMAGE             COMMAND                  CREATED          STATUS                        PORTS     NAMES
0b07f0cf56fa   training/webapp   "python app.py"          12 minutes ago   Exited (137) 6 seconds ago              exciting_haslett

# åˆ é™¤å®¹å™¨
[root@docker_master ~]# docker rm $(docker ps -aq)
#										ğŸ‘† è¿™ä¸ªshellå‘½ä»¤æ˜¯å°†æ‰€æœ‰çš„å®¹å™¨é•œåƒè¾“å‡ºåˆ°åˆ é™¤
0b07f0cf56fa
c8099c6942cc
98bb23fe0b49
4f2632ec4748
037daadaacca
[root@docker_master ~]# docker ps -a
CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

```

### dockeré•œåƒ

```shell
# æœç´¢é•œåƒ
[root@docker_master ~]# docker search webapp
NAME                                 DESCRIPTION                                     STARS     OFFICIAL   AUTOMATED
training/webapp                                                                      77                   [OK]

# ä¸‹è½½é•œåƒ
[root@docker_master ~]# docker pull training/webapp
Using default tag: latest
latest: Pulling from training/webapp
Image docker.io/training/webapp:latest uses outdated schema1 manifest format. Please upgrade to a schema2 image for better future compatibility. More information at https://docs.docker.com/registry/spec/deprecated-schema-v1/
# ğŸ‘‡ è¿™é‡Œè¿›è¡Œäº†åˆ†å±‚ä¸‹è½½ï¼Œå¦‚æœæœ‰å¯¹åº”çš„å±‚åœ¨æœ¬åœ°å°±ä¸ä¼šä¸‹è½½äº†ã€‚
e190868d63f8: Pull complete 
909cd34c6fd7: Pull complete 
0b9bfabab7c1: Pull complete 
a3ed95caeb02: Pull complete 
10bbbc0fc0ff: Pull complete 
fca59b508e9f: Pull complete 
e7ae2541b15b: Pull complete 
9dd97ef58ce9: Pull complete 
a4c1b0cb7af7: Pull complete 
Digest: sha256:06e9c1983bd6d5db5fba376ccd63bfa529e8d02f23d5079b8f74a616308fb11d
Status: Downloaded newer image for training/webapp:latest
docker.io/training/webapp:latest

# æŸ¥çœ‹æœ¬æœºé•œåƒ
[root@docker_master ~]# docker images
REPOSITORY        TAG       IMAGE ID       CREATED        SIZE
centos            latest    300e315adb2f   3 months ago   209MB
training/webapp   latest    6fae60ef3446   5 years ago    349MB
# -aæ˜¾ç¤ºæ‰€æœ‰é•œåƒ,-qåªæ˜¾ç¤ºID

# åˆ é™¤é•œåƒ
[root@docker_master ~]# docker rmi d1165f221234
Untagged: hello-world:latest
Untagged: hello-world@sha256:308866a43596e83578c7dfa15e27a73011bdd402185a84c5cd7f32a88b501a24
Deleted: sha256:d1165f2212346b2bab48cb01c1e39ee8ad1be46b87873d9ca7a4e434980a7726
Deleted: sha256:f22b99068db93900abe17f7f5e09ec775c2826ecfe9db961fea68293744144bd

# æ„å»ºé•œåƒ
# é…ç½®DOckerFileæ–‡ä»¶ğŸ‘‡
[root@docker_master ~]# cat Dockerfile 
# ä½¿ç”¨å“ªä¸ªé•œåƒä½œä¸ºæº
FROM centos
# maintainer	é•œåƒä½œè€…
MAINTAINER EzioTAuditore "tao411324@163.com"
# æ¯ä¸€è¡Œå‘½ä»¤éƒ½ä¼šåœ¨é•œåƒä¸Šæ·»åŠ ä¸€å±‚
RUN /bin/echo 'root:123456' | chpasswd
RUN useradd eziota
RUN /bin/echo 'eziota:123456' | chpasswd
RUN /bin/echo -e "LANG=\"en_US.UTF-8\"" >/etc/default/local
EXPOSE 22
EXPOSE 80
CMD /usr/sbin/sshd -D
[root@docker_master ~]# docker build -t eziota/centos:v1 .
Sending build context to Docker daemon  23.04kB
Step 1/9 : FROM centos
 ---> 300e315adb2f
Step 2/9 : MAINTAINER EzioTAuditore "tao411324@163.com"
 ---> Running in 4e93fed2112a
Removing intermediate container 4e93fed2112a
 ---> 1d7c9de1e8c0
Step 3/9 : RUN /bin/echo 'root:123456' | chpasswd
 ---> Running in 1b4241bdaeb0
Removing intermediate container 1b4241bdaeb0
 ---> 49100796e7e3
Step 4/9 : RUN useradd eziota
 ---> Running in 72dee2e1c85e
Removing intermediate container 72dee2e1c85e
 ---> 409a8d7ce1aa
Step 5/9 : RUN /bin/echo 'eziota:123456' | chpasswd
 ---> Running in 5b011eedd23f
Removing intermediate container 5b011eedd23f
 ---> 3709bc979663
Step 6/9 : RUN /bin/echo -e "LANG=\"en_US.UTF-8\"" >/etc/default/local
 ---> Running in f48a509db235
Removing intermediate container f48a509db235
 ---> 4bdbb12a102c
Step 7/9 : EXPOSE 22
 ---> Running in 4b2f913ef7a9
Removing intermediate container 4b2f913ef7a9
 ---> 5688366031e8
Step 8/9 : EXPOSE 80
 ---> Running in 28c7a9655478
Removing intermediate container 28c7a9655478
 ---> 6502ba472ca4
Step 9/9 : CMD /usr/sbin/sshd -D
 ---> Running in f1aa569106d8
Removing intermediate container f1aa569106d8
 ---> 13815aa58c53
Successfully built 13815aa58c53
Successfully tagged eziota/centos:v1
# æŸ¥çœ‹åˆ›å»ºå‡ºæ¥çš„é•œåƒ
[root@docker_master ~]# docker images
REPOSITORY        TAG       IMAGE ID       CREATED         SIZE
# ğŸ‘‡åˆ›å»ºå‡ºæ¥äº†
eziota/centos     v1        13815aa58c53   2 minutes ago   210MB

# ç»™é•œåƒè®¾ç½®æ ‡ç­¾
[root@docker_master ~]# docker tag 13815aa58c53 eziota/centos:v2
[root@docker_master ~]# docker images
REPOSITORY        TAG       IMAGE ID       CREATED         SIZE
eziota/centos     v1        13815aa58c53   5 minutes ago   210MB
eziota/centos     v2        13815aa58c53   5 minutes ago   210MB

```

### å®¹å™¨ç½‘ç»œ

``` shell
# ç«¯å£æ˜ å°„
# 	åœ¨åˆ›å»ºç³»ç»Ÿçš„æ—¶å€™è¿›è¡Œç«¯å£æ˜ å°„
#		docker run -P(éšæœºæ˜ å°„)/-p(æŒ‡å®šæ˜ å°„:-p IP:ä¸»æœºç«¯å£:å®¹å™¨ç«¯å£)

# æŸ¥çœ‹ç«¯å£æ˜ å°„
[root@docker_master ~]# docker port bc0 5000
0.0.0.0:49154

# åˆ›å»ºä¸€ä¸ªç½‘ç»œ
[root@docker_master ~]# docker network create -d bridge internal
d582d421db10d77cab55eaf36247db77a77c8958829fa81cf7b272683f821fe4
# -dæŒ‡å®šç½‘ç»œç±»å‹:bridge æ¡¥æ¥ç½‘ç»œ overlay:???
[root@docker_master ~]# docker network ls
NETWORK ID     NAME       DRIVER    SCOPE
1876b7428464   bridge     bridge    local
a537ea3c513c   host       host      local
# 				ğŸ‘‡è¿™é‡Œæ˜¯åå­— ğŸ‘‡ è¿™é‡Œæ˜¯ç±»å‹
d582d421db10   internal   bridge    local

# æ·»åŠ å®¹å™¨åˆ°ç½‘ç»œ
[root@docker_master ~]# docker run -itd --name centos_01 --network internal centos /bin/bash05bd48ecdacb52d67e8d5685063ffe88802dbe0d6c23b124376a72e999699d71
[root@docker_master ~]# docker run -itd --name centos_02 --network internal centos /bin/bash 
f97bc7b594d5e98f9282671b2f9b43e2a2e1f45ff1c0062a88b2a43f0933f304
[root@docker_master ~]# docker ps
CONTAINER ID   IMAGE     COMMAND       CREATED          STATUS          PORTS     NAMES
f97bc7b594d5   centos    "/bin/bash"   2 seconds ago    Up 1 second               centos_02
05bd48ecdacb   centos    "/bin/bash"   28 seconds ago   Up 27 seconds             centos_01
# è¿›è¡Œè¿é€šæµ‹è¯•
# æ£€æŸ¥IPåœ°å€
[root@docker_master ~]# docker exec -it f97 /bin/bash
[root@f97bc7b594d5 /]# ip a
35: eth0@if36: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc noqueue state UP group default 
    link/ether 02:42:ac:13:00:03 brd ff:ff:ff:ff:ff:ff link-netnsid 0
#			ğŸ‘‡ IPåœ°å€
    inet 172.19.0.3/16 brd 172.19.255.255 scope global eth0
       valid_lft forever preferred_lft forever
[root@docker_master ~]# docker exec -it 05b /bin/bash
[root@05bd48ecdacb /]# ip a
33: eth0@if34: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc noqueue state UP group default 
    link/ether 02:42:ac:13:00:02 brd ff:ff:ff:ff:ff:ff link-netnsid 0
# 			ğŸ‘‡IPåœ°å€
    inet 172.19.0.2/16 brd 172.19.255.255 scope global eth0
       valid_lft forever preferred_lft forever
[root@05bd48ecdacb /]# ping 172.19.0.3
PING 172.19.0.3 (172.19.0.3) 56(84) bytes of data.
64 bytes from 172.19.0.3: icmp_seq=1 ttl=64 time=0.073 ms
# å¯ä»¥pingé€š,ç½‘ç»œå·²è¿æ¥

# é…ç½®DNS
# åœ¨ä¸»æœºé…ç½®å…¨éƒ¨å®¹å™¨çš„DNS
# ç¼–è¾‘é…ç½®æ–‡ä»¶:/etc/docker/deamon.json
{
	"DNS":[
		"114.114.114.114",
		"8.8.8.8"
	]
}
# ä¿®æ”¹å®Œé…ç½®æ–‡ä»¶åé‡å¯dockeræœåŠ¡

# å•ç‹¬æŒ‡å®šå®¹å™¨çš„DNSæœåŠ¡å™¨
[root@docker_master ~]# docker run -it --rm centos --dns=114.114.114.114
```

### ä»“åº“ç®¡ç†

ä»“åº“:repository

ä»è¿œç¨‹ä»“åº“ä¸‹è½½æˆ–ä¸Šä¼ æ–‡ä»¶,æš‚ä¸è¿›è¡Œæ¼”ç¤º

### Dockerfile

```shell
# é¡¹ç›®æ¼”ç¤º,ä½¿ç”¨nginxé•œåƒæ·»åŠ ä¸€ä¸ªä¸»é¡µ
# ç¼–è¾‘dockerfile
[root@docker_master nginx]# cat << EOF >> Dockerfile
> FROM nginx
> MAINTAINER EzioTAuditore "tao411324@163.com"
> 
> RUN echo 'è¿™æ˜¯ä¸€ä¸ªæœ¬åœ°æ„å»ºçš„nginxé•œåƒ' > /usr/share/nginx/html/index.html
> EOF
# æ„å»ºé•œåƒ
[root@docker_master nginx]# docker build -t eziota/nginx:v1 .
Sending build context to Docker daemon  2.048kB
Step 1/3 : FROM nginx
latest: Pulling from library/nginx
6f28985ad184: Pull complete 
29f7ebf60efd: Pull complete 
879a7c160ac6: Pull complete 
de58cd48a671: Pull complete 
be704f37b5f4: Pull complete 
158aac73782c: Pull complete 
Digest: sha256:d2925188effb4ddca9f14f162d6fba9b5fab232028aa07ae5c1dab764dca8f9f
Status: Downloaded newer image for nginx:latest
 ---> 6084105296a9
Step 2/3 : MAINTAINER EzioTAuditore "tao411324@163.com"
 ---> Running in 3c9f3d954eb4
Removing intermediate container 3c9f3d954eb4
 ---> b7769b0481a3
Step 3/3 : RUN echo 'è¿™æ˜¯ä¸€ä¸ªæœ¬åœ°æ„å»ºçš„nginxé•œåƒ' > /usr/share/nginx/html/index.html
 ---> Running in e6390eee23ef
Removing intermediate container e6390eee23ef
 ---> e3d57768f839
Successfully built e3d57768f839
Successfully tagged eziota/nginx:v1
[root@docker_master nginx]# cd
[root@docker_master ~]# docker images
REPOSITORY        TAG       IMAGE ID       CREATED         SIZE
eziota/nginx      v1        e3d57768f839   7 seconds ago   133MB
eziota/centos     v1        13815aa58c53   2 hours ago     210MB
eziota/centos     v2        13815aa58c53   2 hours ago     210MB
nginx             latest    6084105296a9   3 days ago      133MB
centos            latest    300e315adb2f   3 months ago    209MB
training/webapp   latest    6fae60ef3446   5 years ago     349MB
# è¿è¡Œ
[root@docker_master ~]# docker run -itd -p 4000:8080 eziota/nginx:v1 
87329e2d8d37c8f9ad1588318b2f6025d22c94b4eca6f2799a30a9a9a10f3573
[root@docker_master ~]# docker ps
CONTAINER ID   IMAGE             COMMAND                  CREATED         STATUS         PORTS                            NAMES
87329e2d8d37   eziota/nginx:v1   "/docker-entrypoint.â€¦"   2 seconds ago   Up 2 seconds   80/tcp, 0.0.0.0:4000->8080/tcp   stupefied_leakey


# FROMæŒ‡ä»¤
# FROM å®šä¹‰äº†ä¸€ä¸ªåŸºç¡€é•œåƒ,åç»­æˆ‘ä»¬çš„ä¿®æ”¹éƒ½æ˜¯åœ¨é•œåƒçš„åŸºç¡€ä¸Šè¿›è¡Œçš„æ·»åŠ å±‚
FROM centos # ä½¿ç”¨centosé•œåƒä½œä¸ºåŸºç¡€

# MAINTAINERæŒ‡ä»¤
# MAINTAINER å®šä¹‰äº†ä½œè€…ä¿¡æ¯,åé¢å¯ä»¥å¸¦ä¸Šä½œè€…å§“åå’Œé‚®ç®±
MAINTAINERã€€EzioTA "tao411324@163.com"

# RUNæŒ‡ä»¤
# RUN ç”¨äºæ‰§è¡Œåé¢è·Ÿç€çš„å‘½ä»¤è¡Œå‘½ä»¤,ä¸€èˆ¬å‘½ä»¤æœ‰ä¸¤ç§æ ¼å¼:
# 	shellæ ¼å¼:
#				RUN <å‘½ä»¤è¡Œå‘½ä»¤>		--> ç­‰äºç›´æ¥åœ¨shellä¸­æ‰§è¡Œå‘½ä»¤
#	execæ ¼å¼:
# 				RUN ["å¯æ‰§è¡Œæ–‡ä»¶","å‚æ•°1","å‚æ•°2"]
#				RUN ["./test.php","dev","offline"] --> ./test.php dev offline
# ! æ²¡æ‰§è¡Œä¸€æ¬¡RUNå°±ä¼šåœ¨é•œåƒä¸Šå¢åŠ ä¸€å±‚,è¿‡äºæ— æ„ä¹‰çš„å±‚ä¼šé€ æˆé•œåƒè†¨èƒ€è¿‡å¤§

# COPYæŒ‡ä»¤
# COPY ç”¨äºä»ä¸Šä¸‹æ–‡ç›®å½•(dockerfileæ‰€åœ¨ç›®å½•)ä¸­å¤åˆ¶æ–‡ä»¶åˆ°å®¹å™¨é‡ŒæŒ‡å®šçš„è·¯å¾„
# 		å¦‚æœå®¹å™¨å†…çš„è·¯å¾„ä¸å­˜åœ¨å¯ä»¥è‡ªåŠ¨åˆ›å»ºå®Œæ¯•
COPY <æºè·¯å¾„1> <ç›®æ ‡è·¯å¾„>

# ADDæŒ‡ä»¤
# ADD ä½¿ç”¨æ–¹æ³•å’ŒCOPYä¸€è‡´,ä½†æ˜¯å¦‚æœæºæ–‡ä»¶æ˜¯å‹ç¼©åŒ…æ–‡ä»¶çš„è¯ä¼šè‡ªåŠ¨è§£å‹

# CMDæŒ‡ä»¤
# CMD ç±»ä¼¼äºRUNæŒ‡ä»¤,ä½†æ˜¯CMDæ˜¯åœ¨docker bulidæ—¶è¿è¡Œ,CMDæ˜¯åœ¨docker runæ—¶è¿è¡Œ
# ! å¦‚æœå­˜åœ¨å¤šä¸ªCMDæŒ‡ä»¤åœ¨dockerfileä¸­,åªæœ‰æœ€åä¸€ä¸ªç”Ÿæ•ˆ
# ! CMD æŒ‡ä»¤æŒ‡å®šçš„ç¨‹åºå¯è¢« docker run å‘½ä»¤è¡Œå‚æ•°ä¸­æŒ‡å®šè¦è¿è¡Œçš„ç¨‹åºæ‰€è¦†ç›–

# ENTRYPOINT æŒ‡ä»¤
# ENTRYPOINT ç±»ä¼¼äºCMDæŒ‡ä»¤ï¼Œä½†æ˜¯ENTRYPOINTä¸ä¼šè¢«docker runçš„å‘½ä»¤è¡Œå‚æ•°æŒ‡å®šçš„æŒ‡ä»¤æ‰€è¦†ç›–ï¼Œå¹¶ä¸”è¿™äº›å‘½ä»¤è¡Œå‚æ•°ä¼šè¢«å½“åšå‚æ•°é€ç»™ENTRYPOINTæŒ‡ä»¤æŒ‡å®šçš„ç¨‹åº
# å¦‚æœdocker runä½¿ç”¨äº†--entrypointé€‰é¡¹ï¼Œå°†è¦†ç›–CMDæŒ‡ä»¤æŒ‡å®šçš„ç¨‹åº

# ENV æŒ‡ä»¤
# ENV å®šä¹‰ç¯å¢ƒå˜é‡,åç»­æŒ‡ä»¤å¯ä»¥ä½¿ç”¨è¿™ä¸ªç¯å¢ƒå˜é‡
ENV <key> <value>
ENV <key1=value1> <key2=value2> ...

# ARG æŒ‡ä»¤
# ARG æ„å»ºå‚æ•°,ä¸ENVä½œç”¨ä¸€è‡´,ä½†è®¾ç½®çš„å˜é‡èŒƒå›´ä»…åœ¨DOckerfileä¸­ç”Ÿæ•ˆ
ARG <å‚æ•°å>[=<é»˜è®¤å€¼>]

# VOLUME æŒ‡ä»¤
# VOLUME å®šä¹‰åŒ¿åæ•°æ®å·,å¯åŠ¨å®¹å™¨å¦‚æœæ²¡æœ‰æŒ‚è½½å·,å°±ä¼šæŒ‡å®šä¸€ä¸ªé»˜è®¤çš„åŒ¿åå·
VOLUME ["<è·¯å¾„1>","<è·¯å¾„2>..."]
VOLUME <è·¯å¾„>

# EXPOSE æŒ‡ä»¤
# EXPOSE å£°æ˜ç«¯å£å¸®åŠ©é•œåƒä½œè€…ç†è§£å®¹å™¨çš„ç«¯å£,åœ¨ä½¿ç”¨-Péšæœºæ˜ å°„çš„æ—¶å€™ä¼šéšæœºæ˜ å°„EXPOSEçš„ç«¯å£
EXPOSE <ç«¯å£1> [<ç«¯å£2>...]

# WORKDIR æŒ‡ä»¤
# WORKDIR æŒ‡å®šå·¥ä½œç›®å½•,å¿…é¡»æ˜¯æå‰å»ºå¥½
WORKDIR <å·¥ä½œç›®å½•è·¯å¾„>

# USERã€€æŒ‡ä»¤
# æŒ‡å®šåç»­å‘½ä»¤çš„ç”¨æˆ·å’Œç”¨æˆ·ç»„,å¿…é¡»æå‰åˆ›å»º
USER <ç”¨æˆ·å>[:<ç”¨æˆ·ç»„>]


```

